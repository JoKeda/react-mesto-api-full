(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),o=n(19),i=n.n(o),l=(n(30),n(8)),s=n.n(l),u=n(12),p=n(23),m=n(2),d=n(4),j=n.p+"static/media/logo.c2821b38.svg";var b=function(e){var t=e.loggedIn,n=e.onSignOut,c=e.email;return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("img",{src:j,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"header_email",children:c}),Object(a.jsx)("div",{onClick:n,className:"login__link logout__link",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})};var f=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},g=n(20),O=n(21),h=new(function(){function e(t){Object(g.a)(this,e),this.baseURL=t.baseUrl,this.headers=t.headers}return Object(O.a)(e,[{key:"getInitialCards",value:function(){var e=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/cards"),{headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(e)})}))}},{key:"getUserInfo",value:function(){var e=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/users/me"),{headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(e)})}))}},{key:"setUserInfo",value:function(e,t){var n=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/users/me"),{method:"PATCH",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(n)}),body:JSON.stringify({name:e,about:t})}))}},{key:"setCard",value:function(e,t){var n=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/cards"),{method:"POST",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(n)}),body:JSON.stringify({name:e,link:t})}))}},{key:"deleteCard",value:function(e){var t=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/cards/").concat(e),{method:"DELETE",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(t)})}))}},{key:"putLikeCard",value:function(e){var t=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/cards/").concat(e,"/likes"),{method:"PUT",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(t)})}))}},{key:"deleteLikeCard",value:function(e){var t=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(t)})}))}},{key:"updateUserPicture",value:function(e){var t=localStorage.getItem("token");return this.getAnswer(fetch("".concat(this.baseURL,"/users/me/avatar"),{method:"PATCH",headers:Object(m.a)(Object(m.a)({},this.headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({avatar:e})}))}},{key:"getAnswer",value:function(e){return e.then((function(e){return e.ok?e.json():Promise.reject("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u043e\u0448\u0435\u043b \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e: \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}}]),e}())({baseUrl:"https://api.jokeda.students.nomoredomains.icu",headers:{"Content-Type":"application/json"}}),v=Object(c.createContext)({});function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var y=c.createElement("path",{d:"M10 50A40 40 0 0 0 90 50A40 42 0 0 1 10 50",fill:"#ffffff",stroke:"none"},c.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 51;360 50 51"}));function w(e,t){var n=e.title,a=e.titleId,r=x(e,["title","titleId"]);return c.createElement("svg",_({style:{margin:"auto",background:"rgba(0, 0, 0, 0)",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,y)}var E=c.forwardRef(w);n.p;var k=function(){return Object(a.jsx)("div",{className:"loader",children:Object(a.jsx)(E,{})})};n(32);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var S=c.createElement("g",null),L=c.createElement("g",null),P=c.createElement("g",null),I=c.createElement("g",null),A=c.createElement("g",null),F=c.createElement("g",null),B=c.createElement("g",null),U=c.createElement("g",null),D=c.createElement("g",null),T=c.createElement("g",null),R=c.createElement("g",null),z=c.createElement("g",null),M=c.createElement("g",null),q=c.createElement("g",null),J=c.createElement("g",null);function G(e,t){var n=e.title,a=e.titleId,r=N(e,["title","titleId"]);return c.createElement("svg",C({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 455.111 455.111",style:{enableBackground:"new 0 0 455.111 455.111"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("circle",{style:{fill:"#E24C4B"},cx:227.556,cy:227.556,r:227.556}),c.createElement("path",{style:{fill:"#D1403F"},d:"M455.111,227.556c0,125.156-102.4,227.556-227.556,227.556c-72.533,0-136.533-32.711-177.778-85.333 c38.4,31.289,88.178,49.778,142.222,49.778c125.156,0,227.556-102.4,227.556-227.556c0-54.044-18.489-103.822-49.778-142.222 C422.4,91.022,455.111,155.022,455.111,227.556z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M331.378,331.378c-8.533,8.533-22.756,8.533-31.289,0l-72.533-72.533l-72.533,72.533 c-8.533,8.533-22.756,8.533-31.289,0c-8.533-8.533-8.533-22.756,0-31.289l72.533-72.533l-72.533-72.533 c-8.533-8.533-8.533-22.756,0-31.289c8.533-8.533,22.756-8.533,31.289,0l72.533,72.533l72.533-72.533 c8.533-8.533,22.756-8.533,31.289,0c8.533,8.533,8.533,22.756,0,31.289l-72.533,72.533l72.533,72.533 C339.911,308.622,339.911,322.844,331.378,331.378z"}),S,L,P,I,A,F,B,U,D,T,R,z,M,q,J)}var V=c.forwardRef(G);n.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var K=c.createElement("g",null),Q=c.createElement("g",null),W=c.createElement("g",null),X=c.createElement("g",null),Z=c.createElement("g",null),$=c.createElement("g",null),ee=c.createElement("g",null),te=c.createElement("g",null),ne=c.createElement("g",null),ae=c.createElement("g",null),ce=c.createElement("g",null),re=c.createElement("g",null),oe=c.createElement("g",null),ie=c.createElement("g",null),le=c.createElement("g",null);function se(e,t){var n=e.title,a=e.titleId,r=Y(e,["title","titleId"]);return c.createElement("svg",H({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 507.2 507.2",style:{enableBackground:"new 0 0 507.2 507.2"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("circle",{style:{fill:"#32BA7C"},cx:253.6,cy:253.6,r:253.6}),c.createElement("path",{style:{fill:"#0AA06E"},d:"M188.8,368l130.4,130.4c108-28.8,188-127.2,188-244.8c0-2.4,0-4.8,0-7.2L404.8,152L188.8,368z"}),c.createElement("g",null,c.createElement("path",{style:{fill:"#FFFFFF"},d:"M260,310.4c11.2,11.2,11.2,30.4,0,41.6l-23.2,23.2c-11.2,11.2-30.4,11.2-41.6,0L93.6,272.8 c-11.2-11.2-11.2-30.4,0-41.6l23.2-23.2c11.2-11.2,30.4-11.2,41.6,0L260,310.4z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M348.8,133.6c11.2-11.2,30.4-11.2,41.6,0l23.2,23.2c11.2,11.2,11.2,30.4,0,41.6l-176,175.2 c-11.2,11.2-30.4,11.2-41.6,0l-23.2-23.2c-11.2-11.2-11.2-30.4,0-41.6L348.8,133.6z"})),K,Q,W,X,Z,$,ee,te,ne,ae,ce,re,oe,ie,le)}var ue=c.forwardRef(se);n.p;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var de=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),je=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),be=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),fe=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),ge=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),Oe=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),he=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),ve=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),_e=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),xe=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),ye=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),we=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),Ee=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),ke=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"}),Ce=c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"});function Ne(e,t){var n=e.title,a=e.titleId,r=me(e,["title","titleId"]);return c.createElement("svg",pe({width:512,height:512,x:0,y:0,viewBox:"0 0 492 492",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",className:"",ref:t,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("g",null,c.createElement("g",{xmlns:"http://www.w3.org/2000/svg"},c.createElement("g",null,c.createElement("path",{d:"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872    c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872    c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052    L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116    c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952    c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116    c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z",fill:"#f4f4f4","data-original":"#000000",style:{},className:""}))),de,je,be,fe,ge,Oe,he,ve,_e,xe,ye,we,Ee,ke,Ce))}var Se=c.forwardRef(Ne);n.p;var Le=function(e){var t=e.info,n=e.onClose,c=t.open?"notification_box notification_visible":"notification_box notification_hidden";return Object(a.jsx)("div",{className:"notification_container",children:Object(a.jsxs)("div",{className:c,children:[Object(a.jsx)("div",{className:"notification_icon_box",children:"error"===t.type?Object(a.jsx)(V,{className:"notification_icon"}):Object(a.jsx)(ue,{className:"notification_icon"})}),Object(a.jsx)("div",{className:"notification_text_box",children:t.text}),Object(a.jsx)("div",{className:"notification_close_button",onClick:n,children:Object(a.jsx)(Se,{className:"notification_icon"})})]})})},Pe=n(3),Ie=n(24),Ae=function(e){var t=e.component,n=Object(Ie.a)(e,["component"]);return Object(a.jsx)(Pe.b,{children:function(){return n.isLoggedIn?Object(a.jsx)(t,Object(m.a)({},n)):Object(a.jsx)(Pe.a,{to:"./sign-in"})}})};var Fe=function(e){var t=e.cardInfo,n=e.onCardClick,r=e.onCardLike,o=e.onCardDeleteClick,i=Object(c.useContext)(v),l=t.owner._id===i._id,s=t.likes.some((function(e){return e._id===i._id})),u="".concat(l?"element__delete":"element__delete_hidden"),p="element__like ".concat(s?"element__like_active":"");return Object(a.jsxs)("article",{className:"element",children:[Object(a.jsx)("button",{className:u,onClick:o,type:"button"}),Object(a.jsx)("img",{onClick:function(){n(t)},src:t.link,className:"element__image",alt:t.name}),Object(a.jsxs)("div",{className:"element__data",children:[Object(a.jsx)("h2",{className:"element__title",children:t.name}),Object(a.jsxs)("div",{className:"element__like-info",children:[Object(a.jsx)("button",{className:p,onClick:r,type:"button"}),Object(a.jsx)("span",{className:"element__like-score",children:t.likes.length})]})]})]})};var Be=function(e){var t,n=e.onCardClick,r=e.onEditProfile,o=e.onEditAvatar,i=e.onAddPlace,l=e.onCardLike,s=e.onCardDeleteClick,u=e.onGetInfo,p=Object(c.useContext)(v);return Object(c.useEffect)((function(){u()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("img",{onClick:o,src:p.userAvatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"}),Object(a.jsx)("span",{className:"profile__avatar-edit"}),Object(a.jsxs)("div",{className:"profile__data",children:[Object(a.jsxs)("div",{className:"profile__data-item",children:[Object(a.jsx)("h1",{className:"profile__title",children:p.userName}),Object(a.jsx)("button",{className:"profile__edit-button",onClick:r,type:"button"})]}),Object(a.jsx)("p",{className:"profile__description",children:p.userDescription})]}),Object(a.jsx)("button",{className:"profile__add-button",onClick:i,type:"button"})]}),Object(a.jsx)("section",{className:"elements",children:null===p||void 0===p||null===(t=p.cards)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(Fe,{onCardLike:function(){return l(e)},onCardDeleteClick:function(){return s(e)},onCardClick:n,cardInfo:e},e._id)}))})]})},Ue=n(7);var De=function(e){var t=e.onSignIn,n=r.a.useState(""),c=Object(d.a)(n,2),o=c[0],i=c[1],l=r.a.useState(""),s=Object(d.a)(l,2),u=s[0],p=s[1];return Object(a.jsxs)("form",{className:"login",onSubmit:function(e){e.preventDefault(),o&&u&&t(o,u,i,p)},children:[Object(a.jsx)("h3",{className:"popup__title login__title",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsx)("input",{className:"popup__input login__input",name:"userEmail",type:"email",placeholder:"Email",onChange:function(e){i(e.target.value)},value:o||"",required:!0}),Object(a.jsx)("input",{className:"popup__input login__input",name:"userPassword",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){p(e.target.value)},value:u||"",required:!0}),Object(a.jsx)("button",{className:"popup__botton login__button",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsx)(Ue.b,{to:"/sign-up",className:"login__link",children:"\u0401\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})};var Te=function(e){var t=e.onSignUp,n=r.a.useState(""),c=Object(d.a)(n,2),o=c[0],i=c[1],l=r.a.useState(""),s=Object(d.a)(l,2),u=s[0],p=s[1];return Object(a.jsxs)("form",{className:"login",onSubmit:function(e){e.preventDefault(),t(o,u)},children:[Object(a.jsx)("h3",{className:"popup__title login__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsx)("input",{className:"popup__input login__input",name:"userEmail",type:"email",placeholder:"Email",onChange:function(e){i(e.target.value)},value:o||"",required:!0}),Object(a.jsx)("input",{className:"popup__input login__input",name:"userPassword",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){p(e.target.value)},value:u||"",required:!0}),Object(a.jsx)("button",{className:"popup__botton login__button",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(a.jsx)(Ue.b,{to:"/sign-in",className:"login__link",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})},Re="https://api.jokeda.students.nomoredomains.icu",ze=function(e){var t=e.password,n=e.email;return fetch("".concat(Re,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},Me=function(e){var t=e.password,n=e.email;return fetch("".concat(Re,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){return localStorage.setItem("token",e.token),e})).catch((function(e){console.log(e.message)}))},qe=function(e){return fetch("".concat(Re,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return console.log(e),Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))};var Je=function(e){var t=e.name,n=e.title,r=e.children,o=e.onClose,i=e.isOpen,l=e.onSubmit,s=function(){o()};return Object(c.useEffect)((function(){var e=function(e){e.target.classList.contains("popup")&&s()};return i&&document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[i]),Object(a.jsx)("div",{className:i?"popup popup__".concat(t," popup_opened"):"popup popup__".concat(t),children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l()},className:"popup__form",name:"popup__form",children:[Object(a.jsx)("h3",{className:"popup__title",children:n}),r,Object(a.jsx)("button",{className:"popup__botton",type:"submit",children:"delete"===t?"\u0414\u0430":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(a.jsx)("button",{onClick:s,className:"popup__close",type:"button"})]})})};var Ge=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,o=(e.onNameChange,e.onLinkChange,Object(c.useState)({name:"",link:""})),i=Object(d.a)(o,2),l=i[0],s=i[1];return Object(a.jsxs)(Je,{isOpen:t,onClose:n,onSubmit:function(){r(l).then((function(){s({name:"",link:""})}))},name:"element",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:[Object(a.jsx)("span",{className:"popup__error",id:"global-add-error"}),Object(a.jsx)("input",{className:"popup__input popup__input_element_element-title",type:"text",name:"element-title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",value:l.name,required:!0,onChange:function(e){s(Object(m.a)(Object(m.a)({},l),{},{name:e.target.value}))}}),Object(a.jsx)("span",{className:"popup__error",id:"error-element-title"}),Object(a.jsx)("input",{className:"popup__input popup__input_element_img",type:"url",name:"element-img",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:l.link,required:!0,onChange:function(e){s(Object(m.a)(Object(m.a)({},l),{},{link:e.target.value}))}}),Object(a.jsx)("span",{className:"popup__error",id:"error-img"})]})};var Ve=function(e){var t=e.open,n=e.onClose,c=e.onSubmit;return Object(a.jsx)(Je,{onSubmit:c,onClose:n,isOpen:t,name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"})};var He=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,o=Object(c.useContext)(v),i=Object(c.useState)({name:"",description:""}),l=Object(d.a)(i,2),s=l[0],u=l[1];return Object(c.useEffect)((function(){u({name:o.userName,description:o.userDescription})}),[o]),Object(a.jsxs)(Je,{isOpen:t,onClose:n,onSubmit:function(){return r(s)},name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:[Object(a.jsx)("input",{className:"popup__input popup__input_element_title",type:"text",name:"title",placeholder:"\u0418\u043c\u044f",minLength:"2",maxLength:"40",value:s.name,onChange:function(e){u(Object(m.a)(Object(m.a)({},s),{},{name:e.target.value}))},required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"error-title"}),Object(a.jsx)("input",{className:"popup__input popup__input_element_description",type:"text",name:"description",placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",value:s.description,onChange:function(e){u(Object(m.a)(Object(m.a)({},s),{},{description:e.target.value}))},required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"error-description"})]})};var Ye=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,o=Object(c.createRef)();return Object(a.jsxs)(Je,{isOpen:t,onSubmit:function(){return r(o.current.value)},onClose:function(){n()},name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:[Object(a.jsx)("input",{ref:o,className:"popup__input popup__input_element_img",type:"url",name:"avatar-img",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"error-img"})]})};var Ke=function(e){var t=e.card,n=e.onClose,r=e.isOpen,o=function(){n()};return Object(c.useEffect)((function(){var e=function(e){e.target.classList.contains("popup")&&o()};return r&&document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),Object(a.jsx)("div",{className:r?"popup popup__image popup_opened":"popup popup__image",children:Object(a.jsxs)("article",{className:"popup__image-container",children:[Object(a.jsx)("button",{onClick:o,type:"button",className:"popup__close popup__close_image"}),Object(a.jsx)("img",{className:"popup__image-item",src:t.link,alt:t.name}),Object(a.jsx)("p",{className:"popup__image-description",children:t.name})]})})};var Qe=function(){var e,t=Object(Pe.g)(),n=Object(c.useState)({}),r=Object(d.a)(n,2),o=r[0],i=r[1],l=Object(c.useState)(!1),j=Object(d.a)(l,2),g=j[0],O=j[1],_=Object(c.useState)({}),x=Object(d.a)(_,2),y=x[0],w=x[1],E=Object(c.useState)({type:"",text:"",open:!1}),C=Object(d.a)(E,2),N=C[0],S=C[1],L=Object(c.useState)({isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,isImageViewPopupOpen:!1,isDeleteCardPopupOpen:!1}),P=Object(d.a)(L,2),I=P[0],A=P[1],F=Object(c.useState)({userName:"",isLoggedIn:!1,userDescription:"",userAvatar:"https://picsum.photos/id/237/200/300",cards:[]}),B=Object(d.a)(F,2),U=B[0],D=B[1],T=function(t){var n=t.type,a=t.text;S({type:n,text:a,open:!0}),e=setTimeout((function(){S(Object(m.a)(Object(m.a)({},N),{},{open:!1}))}),4e3)},R=function(){T({text:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430.",type:"error"})},z=function(){A((function(e){var t=Object(m.a)({},e);for(var n in t)t[n]=!1;return t})),i({})},M=function(){var e=Object(u.a)(s.a.mark((function e(t,n,a,c){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,Me({email:t,password:n});case 4:(null===(r=e.sent)||void 0===r?void 0:r.token)&&(D(Object(m.a)(Object(m.a)({},U),{},{isLoggedIn:!0})),a(""),c("")),r||T({type:"error",text:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043c\u0435\u0439\u043b/\u043f\u0430\u0440\u043e\u043b\u044c!"}),O(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),O(!1),R();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(s.a.mark((function e(n,a){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,ze({email:n,password:a});case 4:T({text:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),t.push("/sign-in"),O(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),T({type:"error",text:null!==(c=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==c?c:e.t0}),O(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=localStorage.getItem("token");e&&(O(!0),Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe(e);case 3:(n=t.sent)&&D(Object(m.a)(Object(m.a)({},U),{},{isLoggedIn:!0,email:null===n||void 0===n?void 0:n.email})),O(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),O(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))())}),[]),Object(a.jsxs)(v.Provider,{value:U,children:[g&&Object(a.jsx)(k,{}),Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(Le,{info:N,onClose:function(){clearTimeout(e),S(Object(m.a)(Object(m.a)({},N),{},{open:!1}))}}),Object(a.jsx)(b,{loggedIn:U.isLoggedIn,onSignOut:function(){localStorage.removeItem("token"),D({isLoggedIn:!1})},email:null===U||void 0===U?void 0:U.email}),Object(a.jsxs)(Pe.d,{children:[Object(a.jsx)(Ae,{component:Be,onAddPlace:function(){A(Object(m.a)(Object(m.a)({},I),{},{isAddPlacePopupOpen:!0}))},onEditProfile:function(){A(Object(m.a)(Object(m.a)({},I),{},{isEditProfilePopupOpen:!0}))},onCardClick:function(e){i(e),A(Object(m.a)(Object(m.a)({},I),{},{isImageViewPopupOpen:!0}))},onCardDeleteClick:function(e){A(Object(m.a)(Object(m.a)({},I),{},{isDeleteCardPopupOpen:!0})),w(e)},onCardLike:function(e){(e.likes.some((function(e){return e._id===U._id}))?h.deleteLikeCard(e._id):h.putLikeCard(e._id)).then((function(t){var n=U.cards.map((function(n){return n._id===e._id?t:n}));D(Object(m.a)(Object(m.a)({},U),{},{cards:n}))})).catch((function(e){R()}))},onGetInfo:function(){O(!0),Promise.all([h.getUserInfo(),h.getInitialCards()]).then((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];D(Object(m.a)(Object(m.a)({},U),{},{userName:n.name,userDescription:n.about,userAvatar:n.avatar,cards:null!==a&&void 0!==a?a:[],email:n.email,_id:n._id}))})).catch((function(e){R()})).finally((function(){O(!1)}))},onEditAvatar:function(){A(Object(m.a)(Object(m.a)({},I),{},{isEditAvatarPopupOpen:!0}))},path:"/",exact:!0,isLoggedIn:null===U||void 0===U?void 0:U.isLoggedIn}),Object(a.jsx)(Pe.b,{exact:!0,path:"/sign-in",children:U.isLoggedIn?Object(a.jsx)(Pe.a,{to:"/"}):Object(a.jsx)(De,{onSignIn:M})}),Object(a.jsx)(Pe.b,{exact:!0,path:"/sign-up",children:U.isLoggedIn?Object(a.jsx)(Pe.a,{to:"/"}):Object(a.jsx)(Te,{onSignUp:q})})]}),Object(a.jsx)(f,{}),Object(a.jsx)(Ge,{onSubmit:function(e){return O(!0),h.setCard(e.name,e.link).then((function(e){D(Object(m.a)(Object(m.a)({},U),{},{cards:[e].concat(Object(p.a)(U.cards))})),z(),T({text:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430!"})})).catch((function(e){R()})).finally((function(){O(!1)}))},open:I.isAddPlacePopupOpen,onClose:z}),Object(a.jsx)(Ve,{onSubmit:function(){O(!0),h.deleteCard(y._id).then((function(){var e=U.cards.filter((function(e){return e._id!==y._id}));D(Object(m.a)(Object(m.a)({},U),{},{cards:e})),z(),w({}),T({text:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"})})).catch((function(e){R()})).finally((function(){O(!1)}))},open:I.isDeleteCardPopupOpen,onClose:z}),Object(a.jsx)(He,{onSubmit:function(e){var t=e.name,n=e.description;O(!0),h.setUserInfo(t,n).then((function(e){D(Object(m.a)(Object(m.a)({},U),{},{userName:e.name,userDescription:e.about})),z(),T({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d!"})})).catch((function(e){R()})).finally((function(){O(!1)}))},open:I.isEditProfilePopupOpen,onClose:z}),Object(a.jsx)(Ye,{onSubmit:function(e){O(!0),h.updateUserPicture(e).then((function(e){D(Object(m.a)(Object(m.a)({},U),{},{userAvatar:e.avatar})),T({text:"\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d!"}),z()})).catch((function(e){R()})).finally((function(){O(!1)}))},open:I.isEditAvatarPopupOpen,onClose:z}),Object(a.jsx)(Ke,{isOpen:I.isImageViewPopupOpen,onClose:z,card:o})]})]})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Ue.a,{children:Object(a.jsx)(Qe,{})})}),document.getElementById("root")),We()}},[[38,1,2]]]);
//# sourceMappingURL=main.006c3ad5.chunk.js.map